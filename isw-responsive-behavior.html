<link rel="import" href="../polymer/polymer.html">

<!--
`isw-responsive-behavior`
Provides feedback about device and orientation, using material design breakpoints.

@demo demo/index.html
-->

<script>
	iswResponsiveBehavior = {
		properties: {
			screenWidth: {
				type: Number,
				notify: true
			},
			screenHeight: {
				type: Number,
				notify: true
			},
			device: {
				type: String,
				notify: true,
				reflectToAttribute: true
			},
			orientation: {
				type: String,
				notify: true,
				reflectToAttribute: true
			},
			_deviceBreakpoints: {
				type: Object,
				value: {
					portrait: {
						tablet: 600,
						desktop: 840
					},
					landscape: {
						tablet: 960,
						desktop: 1280
					}
				}
			}
		},

		created: function() {
			this._boundResize = this.onResize.bind( this );
		},

		attached: function() {
			window.addEventListener( 'resize', this._boundResize );
			this.onResize();
		},

		detached: function() {
			window.removeEventListener( 'resize', this._boundResize );
		},

		onResize: function() {
			this.set( 'screenWidth', window.innerWidth );
			this.set( 'screenHeight', window.innerHeight );

			if( this.screenWidth <= this.screenHeight ) {
				this.set( 'orientation', 'portrait' );
			} else {
				this.set( 'orientation', 'landscape' );
			}

			if( this.screenWidth >= this._deviceBreakpoints[ this.orientation ].desktop ) {
				this.set( 'device', 'desktop' );
			} else if( this.screenWidth >= this._deviceBreakpoints[ this.orientation ].tablet ) {
				this.set( 'device', 'tablet' );
			} else {
				this.set( 'device', 'mobile' );
			}
		}
	}
</script>